v: 1
icon: ./router/assets/icon.png
micros:

  - name: api
    src: ./api/
    engine: custom
    presets:
      api_keys: true
    commands:
      - go get
      - go build main.go
    include:
      - main
    run: ./main
    path: api
    actions:
      - id: "clean_orphaned"
        name: "Clean Up"
        description: "Cleans up orphaned files"
        trigger: "schedule"
        default_interval: "0/15 * * * *"

  - name: router
    src: ./router/
    engine: custom
    primary: true
    commands:
      - go get
      - go build main.go
    include:
      - main
      - assets/
      - styles/
      - scripts/
      - static/
    run: ./main
    public_routes:
      - "/embed/*"
      - "/assets/*"
      - "/shared/*"
      - "/styles/*"
      - "/scripts/*"
      - "/api/embed/*"
      - "/api/shared/*"
  
  - name: global
    src: ./global/
    engine: custom
    commands:
      - go get
      - go build .
    include:
      - global
    run: ./global
    path: global
    